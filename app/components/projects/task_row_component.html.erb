<div class="flex items-center justify-between p-3 border-b border-slate-100 hover:bg-slate-50">
  <div class="flex-1">
    <div class="flex items-center gap-3">
      <span class="text-xs font-mono text-slate-500"><%= task.task_number %></span>
      <%= link_to task.title, project ? projects_project_task_path(project, task) : projects_task_path(task), class: "font-medium text-blue-600 hover:text-blue-800" %>
      <%= render StatusBadgeComponent.new(status: task.status, type: :status) %>
      <%= render StatusBadgeComponent.new(status: task.priority, type: :priority) %>
    </div>
    <p class="text-sm text-slate-600 mt-1"><%= truncate(task.description, length: 80) %></p>
    <div class="flex items-center gap-4 mt-2 text-xs text-slate-500">
      <% if task.user %>
        <span>Owner: <%= task.user.name %></span>
      <% end %>
      <% if task.due_date %>
        <span class="<%= task.due_date < Date.current ? 'text-red-600 font-semibold' : '' %>">
          Due: <%= task.due_date.strftime("%b %d, %Y") %>
        </span>
      <% end %>
      <% if task.completed_at %>
        <span>Completed: <%= task.completed_at.strftime("%b %d, %Y") %></span>
      <% end %>
    </div>
  </div>
  <div class="flex gap-2">
    <% if project %>
      <%= render ViewButtonComponent.new(path: projects_project_task_path(project, task), label: "View") %>
      <%= render EditButtonComponent.new(path: edit_projects_project_task_path(project, task)) %>
      <%= render DeleteButtonComponent.new(path: projects_project_task_path(project, task)) %>
    <% else %>
      <%= render ViewButtonComponent.new(path: projects_task_path(task), label: "View") %>
      <%= render EditButtonComponent.new(path: edit_projects_task_path(task)) %>
      <%= render DeleteButtonComponent.new(path: projects_task_path(task)) %>
    <% end %>
  </div>
</div>
